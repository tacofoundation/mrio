import{_ as t,c as i,a2 as a,o as s}from"./chunks/framework.9hYZJcoh.js";const o="/mrio/assets/content-gdal-geotiff.C3PGbUEZ.svg",r="/mrio/assets/tile.DANCWjwL.svg",n="/mrio/assets/overview_ifd.B5hPtSLr.svg",l="/mrio/assets/interleave.CR6-MMU1.svg",d="/mrio/assets/pixel.ChEFxzfn.gif",c="/mrio/assets/band.E1HozcH8.gif",b=JSON.parse('{"title":"The GDALGeoTIFF format","description":"","frontmatter":{},"headers":[],"relativePath":"en/specification/gdal-geotiff.md","filePath":"en/specification/gdal-geotiff.md"}'),h={name:"en/specification/gdal-geotiff.md"};function p(g,e,f,m,u,E){return s(),i("div",null,e[0]||(e[0]=[a('<h1 id="the-gdalgeotiff-format" tabindex="-1">The GDALGeoTIFF format <a class="header-anchor" href="#the-gdalgeotiff-format" aria-label="Permalink to &quot;The GDALGeoTIFF format&quot;">​</a></h1><p><em>Written by Cesar Aybar and Julio Contreras.</em></p><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to &quot;Introduction&quot;">​</a></h2><p>Hey there! 👋 In this second article, we are diving into the GDALGeoTIFF format, a beefed-up version of the standard GeoTIFF you might already know. The previous article explains how to create a minimal GeoTIFF file, which can be useful for educational purposes but not so much for real-world applications.</p><figure style="display:flex;flex-direction:column;align-items:center;"><img src="'+o+`" alt="Band GIF" style="width:60%;"></figure><p>In the real world, <strong>WE all rely on GDAL</strong>, and by &#39;WE&#39; we mean everyone in the geospatial community! GDAL is the powerhouse behind the spatial libraries you use in Python, R, or Julia. It’s also the backbone of popular GIS software like QGIS, ArcGIS, and others. Simply put, GDAL is everywhere and impossible to ignore. Originally GDAL was initiated by Frank Warmerdam in 1998, today GDAL&#39;s development gained incredible momentum thanks to the very hard work of <a href="https://github.com/rouault" target="_blank" rel="noreferrer">Even Rouault</a>.</p><h2 id="gdalgeotiff" tabindex="-1">GDALGeoTIFF <a class="header-anchor" href="#gdalgeotiff" aria-label="Permalink to &quot;GDALGeoTIFF&quot;">​</a></h2><div class="info custom-block"><p class="custom-block-title">INFO</p><p>We&#39;re skipping core concepts like internal nodata masks or sparse files that are well-documented in the <a href="https://gdal.org/en/stable/drivers/raster/gtiff.html#internal-nodata-masks" target="_blank" rel="noreferrer">official documentation</a>. Instead, we&#39;ll focus on compression, interleaving, and tiling, which are crucial for raster performance.</p></div><p>GDALGeoTIFF builds on the foundation of the standard GeoTIFF format. It enhances interoperability by introducing two new metadata tags:</p><ul><li><strong><code>GDAL_METADATA</code></strong>: <ul><li><strong>TIFF Tag ID</strong>: 42112 (hex 0xA440).</li><li><strong>Data Type</strong>: Stored as a TIFFTAG_ASCII string (text).</li><li><strong>Purpose</strong>: Stores additional non-standard metadata items as an XML-formatted string. This includes key-value pairs organized into domains (e.g., image statistics, coordinate system info, or custom metadata).</li></ul></li></ul><p><strong>GDAL_METADATA Example</strong>:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">GDALMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;STATISTICS_MEAN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;123.45&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;STATISTICS_STDDEV&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;67.89&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Item</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;CUSTOM_DOMAIN:Author&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;Julio Contreras&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">GDALMetadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ul><li><strong><code>GDAL_NODATA</code></strong>: <ul><li><strong>TIFF Tag ID</strong>: 42113 (hex 0xA441).</li><li><strong>Data Type</strong>: Stored as a TIFFTAG_ASCII string (text).</li><li><strong>Purpose</strong>: Stored nodata value for the image. Note that all bands must use the same nodata value.</li></ul></li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>GDAL does not support all TIFF tags. You can find the list of tags supported by GDAL in the <a href="https://gdal.org/en/stable/drivers/raster/gtiff.html#metadata" target="_blank" rel="noreferrer">official documentation</a>.</p></div><h2 id="creating-a-gdalgeotiff-file" tabindex="-1">Creating a GDALGeoTIFF file <a class="header-anchor" href="#creating-a-gdalgeotiff-file" aria-label="Permalink to &quot;Creating a GDALGeoTIFF file&quot;">​</a></h2><p>In this section, we will explore the most relevant creation options for a GDALGeoTIFF file. If you are using the command line, they can be specified using the parameter <code>-co</code> followed by the option name and value. The complete list of options can be found in the <a href="https://gdal.org/en/stable/drivers/raster/gtiff.html#creation-options" target="_blank" rel="noreferrer">official documentation</a>.</p><h3 id="🧱-tile-block-sizing" tabindex="-1">🧱 TILE &amp; Block Sizing <a class="header-anchor" href="#🧱-tile-block-sizing" aria-label="Permalink to &quot;🧱 TILE  &amp; Block Sizing&quot;">​</a></h3><p>Defaults to NO. By default, striped TIFF files are created. If yes is specified, the TIFF file will be tiled. This parameter works together with the <code>BLOCKXSIZE</code> and <code>BLOCKYSIZE</code> parameters. <code>BLOCKXSIZE</code> and <code>BLOCKYSIZE</code> are the tile width and height, respectively.</p><figure style="display:flex;flex-direction:column;align-items:center;"><img src="`+r+'" alt="Interleave" style="width:80%;"><figcaption style="text-align:center;"><b>Figure 1:</b> GDAL options for tiling. A) YES, B) NO. If NO is specified, the TIFF file will be striped.</figcaption></figure><h3 id="overviews" tabindex="-1">Overviews <a class="header-anchor" href="#overviews" aria-label="Permalink to &quot;Overviews&quot;">​</a></h3><p>In GDAL, overviews (or pyramids) are precomputed lower-resolution layers of a raster image. These overviews are stored internally on a new IFD (Image File Directory).</p><figure style="display:flex;flex-direction:column;align-items:center;"><img src="'+n+'" alt="Band GIF" style="width:70%;"><figcaption style="text-align:center;"><b>Figure 2:</b> Overview representation. Overviews are stored in a separate IFD. Image obtained from the Kitware post about [COG creation](https://www.kitware.com/deciphering-cloud-optimized-geotiffs/).</figcaption></figure><p>The <a href="https://gdal.org/en/stable/programs/gdaladdo.html" target="_blank" rel="noreferrer"><code>gdaladdo</code></a> command-line tool enables users to specify resampling methods (e.g., nearest neighbour, cubic) and overview levels (e.g., powers of 2) tailored to their needs. For example, running <code>gdaladdo -r average -levels 4 input.tif</code> creates four overview layers using averaging resampling. This is critical for large GeoTIFFs visualization and analysis, as overviews allow clients to fetch smaller datasets for zoomed-out views without processing the full-resolution file. The gdaladdo tool integrates seamlessly with GDAL’s API, which programmatically supports overview creation via the <code>BuildOverviews()</code>(<a href="https://gdal.org/en/stable/doxygen/classGDALDataset.html" target="_blank" rel="noreferrer">https://gdal.org/en/stable/doxygen/classGDALDataset.html</a>) method in the GDALDataset class. Additionally, GDAL’s support for external overviews (e.g., .ovr files) avoids modifying the original file. Check the <a href="https://gdal.org/en/stable/drivers/raster/gtiff.html#overviews" target="_blank" rel="noreferrer">overview creation</a> documentation for more details.</p><h3 id="🔀-interleave-strategies" tabindex="-1">🔀 INTERLEAVE Strategies <a class="header-anchor" href="#🔀-interleave-strategies" aria-label="Permalink to &quot;🔀 INTERLEAVE Strategies&quot;">​</a></h3><p>The interleave configuration is a renaming of the <code>PLANARCONFIG_CONTIG</code> tag in the TIFF specification. Control how bytes are ordered for different access patterns:</p><table tabindex="0"><thead><tr><th>Configuration</th><th>Storage Pattern</th><th>Description</th></tr></thead><tbody><tr><td>PIXEL</td><td>[R1,G1,B1, R2,G2,B2,...]</td><td>Pixel values are stored contiguously.</td></tr><tr><td>BAND</td><td>[R1,R2,..., G1,G2,..., B1,B2,...]</td><td>Each band is stored contiguously.</td></tr></tbody></table><figure style="display:flex;flex-direction:column;align-items:center;"><img src="'+l+'" alt="Interleave" style="width:90%;"><figcaption style="text-align:center;"><b>Figure 3:</b> GDAL options for interleaving. a) PIXEL, b) BAND. Figure adapted from [Yubal Barrios et al. paper](https://www.mdpi.com/2079-9292/9/10/1576).</figcaption></figure><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>Interleave configuration</strong> determines how bytes are ordered. Depending of the use case, one configuration may be more efficient than the other. For example, if you are working with single-band operations, the <strong>BAND</strong> configuration may be more efficient because it allows you to read the entire band without having to skip bytes. On the other hand, the <strong>PIXEL</strong> configuration may be more efficient when working with multiple bands because it allows you to read all bands for a single pixel without having to skip bytes.</p></div><h3 id="🗜️-compress" tabindex="-1">🗜️ COMPRESS <a class="header-anchor" href="#🗜️-compress" aria-label="Permalink to &quot;🗜️ COMPRESS&quot;">​</a></h3><p>Compression is the process of systematically reorganizing or reconstructing digital data using algorithms (there are many) to minimize storage space or optimize transmission efficiency (via HTTP for instance). This is achieved by eliminating redundancies (<strong>lossless compression</strong>) or prioritizing essential information (<strong>lossy compression</strong>).</p><p>Compression is particularly useful for satellite imagery, which often contains significant redundancies across spatial, temporal, and spectral band dimensions. GDAL supports various compression algorithms for GeoTIFF files, all documented in the <a href="https://gdal.org/en/stable/drivers/raster/gtiff.html#creation-options" target="_blank" rel="noreferrer">GTiff creation options</a> section. Selecting the right method ensures a balance between file size reduction and read/write performance.</p><h3 id="how-do-compress-interleave-and-tile-interact" tabindex="-1">How do COMPRESS, INTERLEAVE, and TILE Interact? <a class="header-anchor" href="#how-do-compress-interleave-and-tile-interact" aria-label="Permalink to &quot;How do COMPRESS, INTERLEAVE, and TILE Interact?&quot;">​</a></h3><p>Understanding how these parameters work together is crucial for optimal raster performance. Let&#39;s analyze their interplay by a simple example. We will analyze a <strong>900x900px 2-band image with <code>TILED=YES</code> and <code>BLOCKXSIZE=300</code> and <code>BLOCKYSIZE=300</code></strong>. We will explore five scenarios:</p><h4 id="case-1-compress-none-tile-yes" tabindex="-1">Case 1: COMPRESS=NONE, TILE=YES <a class="header-anchor" href="#case-1-compress-none-tile-yes" aria-label="Permalink to &quot;Case 1: COMPRESS=NONE, TILE=YES&quot;">​</a></h4><p>When compression is disabled, GDAL calculates the file size in advance before writing the image. The INTERLEAVE parameter controls how pixel data is arranged while setting <code>TILED=YES</code> divides the image into 300x300 pixel blocks. Although the image is tiled, the access remains pixel-level, improving random access performance.</p><h4 id="case-2-compress-none-interleave-pixel-tile-yes" tabindex="-1">Case 2: COMPRESS != NONE, INTERLEAVE=PIXEL, TILE=YES <a class="header-anchor" href="#case-2-compress-none-interleave-pixel-tile-yes" aria-label="Permalink to &quot;Case 2: COMPRESS != NONE, INTERLEAVE=PIXEL, TILE=YES&quot;">​</a></h4><p>The <code>TILED=YES</code> option divides the image into 300x300 pixel blocks, while the pixel-interleaved layout arranges tiles sequentially following the band order: <code>[R1, G1, B1, R2, G2, B2...]</code>. Importantly, compression is applied at the tile level, not per pixel. Each tile acts as a self-contained compression unit, structured as a 2x300x300 pixel block, <strong>think of the tile itself as the foundational unit for compression, rather than individual pixels</strong>. This data structure is highly efficient for pixel- or region-specific operations involving all bands simultaneously, as all band values for a single tile are stored contiguously. In the example image, this results in <strong>9-byte blocks</strong> for the 2-band image.</p><figure style="display:flex;flex-direction:column;align-items:center;"><img src="'+d+'" alt="Pixel GIF" style="width:100%;"><figcaption style="text-align:center;"><b>Figure 4:</b> The pixel-interleaved format. Notice that the compression occurs on a CxHxW block.</figcaption></figure><h4 id="case-3-compress-none-interleave-band-tile-yes" tabindex="-1">Case 3: COMPRESS != NONE, INTERLEAVE=BAND, TILE=YES <a class="header-anchor" href="#case-3-compress-none-interleave-band-tile-yes" aria-label="Permalink to &quot;Case 3: COMPRESS != NONE, INTERLEAVE=BAND, TILE=YES&quot;">​</a></h4><p>The <code>TILED=YES</code> option divides the image into 300x300 pixel blocks, while the band-interleaved groups all values for a single band sequentially: <code>[R1, R2..., G1, G2...]</code>. Compression is applied to 1x300x300 band-specific blocks independently. This structure excels for band-specific operations like NDVI calculations, where only the red and NIR bands need to be accessed without decompressing unrelated data, significantly reducing processing time and memory usage. However, it is inefficient for pixel- or region-specific workflows, as accessing complete pixel data requires decompressing each band separately. In web environments, the non-contiguous byte storage of bands necessitates multiple GET range requests to fetch dispersed data. For the example image, this generates <strong>18-byte blocks</strong> for the 2-band image.</p><figure style="display:flex;flex-direction:column;align-items:center;"><img src="'+c+'" alt="Band GIF" style="width:100%;"><figcaption style="text-align:center;"><b>Figure 5: </b>Band-interleaved storage. Notice that the compression occurs on a 1xHxW block.</figcaption></figure><h4 id="case-5-compress-none-tile-no" tabindex="-1">Case 5: COMPRESS != NONE, TILE=NO <a class="header-anchor" href="#case-5-compress-none-tile-no" aria-label="Permalink to &quot;Case 5: COMPRESS != NONE, TILE=NO&quot;">​</a></h4><p>When compression is applied to each strip and tiling is not used, GDAL can efficiently generate on-the-fly overviews, especially with nearest-neighbour resampling which is the default method for overviews. This approach enables GDAL to skip entire rows during downscaling by a factor of <em>N</em>, as it only reads every <em>N-th</em> row. As a result, the process becomes faster and more resource-efficient, making it ideal for large images where quick access to lower-resolution versions is essential. For more details, see the discussion in the <a href="https://github.com/OSGeo/gdal/issues/8440" target="_blank" rel="noreferrer">GDAL 4.0 meta-ticket</a>.</p><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>In this article, we&#39;ve explored the GDALGeoTIFF format, a powerful extension of the standard GeoTIFF. We&#39;ve discussed the <code>GDAL_METADATA</code> and <code>GDAL_NODATA</code> tags, which store additional metadata and nodata values, respectively. We&#39;ve also covered how compression, interleaving, and tiling interact to optimize raster performance. Next time we will dive into the Cloud Optimized GeoTIFF (COG) format, which is still a GeoTIFF but with some modifications to make it more efficient for cloud-based environments. Stay tuned!</p>',45)]))}const y=t(h,[["render",p]]);export{b as __pageData,y as default};
