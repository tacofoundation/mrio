<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The Multidimensional COG | mrio</title>
    <meta name="description" content="Vite & Vue powered static site generator.">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/mrio/assets/style.DUsa9M1X.css" as="style">
    <link rel="preload stylesheet" href="/mrio/vp-icons.css" as="style">
    
    <script type="module" src="/mrio/assets/app.DjzsVP6c.js"></script>
    <link rel="preload" href="/mrio/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/mrio/assets/chunks/theme.b5DQai--.js">
    <link rel="modulepreload" href="/mrio/assets/chunks/framework.9hYZJcoh.js">
    <link rel="modulepreload" href="/mrio/assets/en_specification_multidimensional-geotiff-specification.md.Bn0hUfyW.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/mrio/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>mrio</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/mrio/en/specification/geotiff/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Specification</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/mrio/en/python/mrio/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Python</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="#" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>R</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="#" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Julia</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/tacofoundation/mrio" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://x.com/isp_uv_es" aria-label="twitter" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-twitter"></span></a><a class="VPSocialLink no-icon" href="mailto:csaybar@gamil.com" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7l8-5V6l-8 5l-8-5v2z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/tacofoundation/mrio" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://x.com/isp_uv_es" aria-label="twitter" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-twitter"></span></a><a class="VPSocialLink no-icon" href="mailto:csaybar@gamil.com" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7l8-5V6l-8 5l-8-5v2z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Introduction</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mrio/en/specification/geotiff.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>GeoTIFF</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mrio/en/specification/gdal-geotiff.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>GDALGeoTIFF</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mrio/en/specification/cog.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>COG</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Specification</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mrio/en/specification/multidimensional-geotiff-specification.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Multidimensional COG</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mrio/en/specification/temporal-geotiff-specification.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>Temporal COG</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _mrio_en_specification_multidimensional-geotiff-specification" data-v-39a288b8><div><h1 id="the-multidimensional-cog" tabindex="-1">The Multidimensional COG <a class="header-anchor" href="#the-multidimensional-cog" aria-label="Permalink to &quot;The Multidimensional COG&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>While multidimensional array formats such as NetCDF, HDF5, and Zarr are currently supported by many GIS software and GDAL, their general-purpose design poses challenges for geospatial interoperability. These formats do not inherently default to explicit metadata conventions, such as coordinate reference systems, spatial dimensions, overviews or temporal attributes. As a result, users often need to manually configure spatial parameters during data ingestion, leading to inconsistent interpretations, projection mismatches, and additional preprocessing steps that complicate geospatial workflows.</p><p>The Multidimensional COG (mCOG) specification extends the traditional GeoTIFF format to support N-dimensional arrays. <strong>Our core principle is that everything should be explicit by default</strong>. It maintains the simplicity and compatibility of COG/GeoTIFF, offers fast access and the ability to be opened by any GIS software or library that supports the GDALGeoTIFF format.</p><figure style="display:flex;flex-direction:column;align-items:center;"><img src="/mrio/assets/content-mcog.DSIngxES.svg" alt="Band GIF" style="width:60%;"></figure><h2 id="file-format-details" tabindex="-1">File format details <a class="header-anchor" href="#file-format-details" aria-label="Permalink to &quot;File format details&quot;">​</a></h2><p>This is the version <code>0.0.1</code> of the mCOG specification. From a high-level perspective, the main difference between a <a href="https://docs.ogc.org/is/19-008r4/19-008r4.html" target="_blank" rel="noreferrer">traditional COG</a> and an mCOG is the addition of a TAG named <strong><code>MD_METADATA</code></strong> that contains the metadata of the multidimensional array. With this metadata, client libraries can reshape the data from a 3D array (band, x, y) structure to an N-dimensional array.</p><p>The <code>MD_METADATA</code> tag is embedded within the <code>TIFFTAG_GDAL_METADATA</code> ASCII tag (code 42112), as recommended by the <a href="https://gdal.org/en/stable/drivers/raster/gtiff.html#metadata" target="_blank" rel="noreferrer">GDAL documentation</a> for handling non-standard metadata. This approach ensures compatibility with the GeoTIFF specification while enabling support for multidimensional arrays. The table below highlights the mandatory and optional fields within the <code>MD_METADATA</code> JSON structure:</p><table tabindex="0"><thead><tr><th>Field</th><th>Type</th><th>Required</th><th>Details</th></tr></thead><tbody><tr><td>md:pattern</td><td>string</td><td>Yes</td><td>A string defining the strategy to reshape the data into a 3D array (band, x, y). It is based on the Einstein-Inspired Notation for OPerationS, einops. The pattern is a space-separated list of dimension names, followed by an arrow <code>-&gt;</code>, and the new order of the dimensions. For example, <code>time band y x -&gt; (time band) y x</code> rearranges the dimensions from <code>(time, band, y, x)</code> to <code>time×band y x</code>, where <code>time×band</code> is a new number of channels. As GeoTIFF define explicitly the <code>y</code> and <code>x</code> dimensions, the pattern <strong>MUST</strong> always include them. There is no restriction on the number of dimensions. Refer to the <a href="https://openreview.net/pdf?id=oapKSVM2bcj" target="_blank" rel="noreferrer">einops paper</a> for more details about the notation.</td></tr><tr><td>md:coordinates</td><td>dictionary</td><td>Yes</td><td>A dictionary defining the coordinates to be combined with the pattern. The values <strong>MUST</strong> be lists of data types compliant with the <a href="https://www.json.org/json-en.html" target="_blank" rel="noreferrer">JSON standard</a>.</td></tr><tr><td>md:attributes</td><td>dictionary</td><td>No</td><td>A dictionary of additional metadata attributes to include in the file. It <strong>MUST</strong> comply with the <a href="https://www.json.org/json-en.html" target="_blank" rel="noreferrer">JSON standard</a>.</td></tr><tr><td>md:dimensions</td><td>list</td><td>No</td><td>A list of dimension names, where the order <strong>MUST</strong> align with the order specified in <code>md:pattern</code> before the arrow <code>-&gt;</code>. If not provided, it is automatically generated based on the <code>md:pattern</code> key.</td></tr><tr><td>md:coordinates_len</td><td>dictionary</td><td>No</td><td>A dictionary defining the length of each dimension. The values <strong>MUST</strong> be integers. If omitted, it is automatically determined from the <code>md:coordinates</code> key.</td></tr></tbody></table><p>It is created automatically when it is not provided.</p><h2 id="example" tabindex="-1">Example <a class="header-anchor" href="#example" aria-label="Permalink to &quot;Example&quot;">​</a></h2><p>The following is an example of the <code>MD_METADATA</code> tag in a mGeoTIFF file:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;md:pattern&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;time band y x -&gt; (time band) y x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;md:coordinates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2021-01-01&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2021-01-02&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2021-01-03&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;band&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B01&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B02&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;B03&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;md:dimensions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;band&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;md:attributes&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;title&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Multidimensional GeoTIFF Example&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;This is a toy example of a Multidimensional GeoTIFF file.&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;md:coordinates_len&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;band&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;lat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;lon&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="understanding-i-o-operations" tabindex="-1">Understanding I/O Operations <a class="header-anchor" href="#understanding-i-o-operations" aria-label="Permalink to &quot;Understanding I/O Operations&quot;">​</a></h2><h3 id="writing-data" tabindex="-1">Writing Data <a class="header-anchor" href="#writing-data" aria-label="Permalink to &quot;Writing Data&quot;">​</a></h3><p>To simplify the explanation of how the I/O works, we will reference the Python API of <a href="https://github.com/tacofoundation/mrio" target="_blank" rel="noreferrer">mrio</a>. When writing a mGeoTIFF file, users must define the <code>MD_METADATA</code> tag as a dictionary. This dictionary is validated using Python dataclass fields (<a href="https://github.com/tacofoundation/mrio-python/blob/main/mrio/fields.py" target="_blank" rel="noreferrer">validation details</a>) and then converted to a JSON string. Refer to the mrio <a href="https://https://tacofoundation.github.io/mrio/en/python/examples.html" target="_blank" rel="noreferrer">Python examples</a> for guidance on writing an mGeoTIFF file.</p><figure style="display:flex;flex-direction:column;align-items:center;"><img src="/mrio/assets/write_mode.BZq6Ydw1.gif" alt="Band GIF" style="width:70%;"><figcaption style="text-align:center;"><b>Figure 1:</b> Writing an nD Array to a GDALGeoTIFF Using mrio.</figcaption></figure><p>By default, all <code>mrio</code> files are created as COGs without overviews. The default creation options are as follows:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">creation_options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;COMPRESS=DEFLATE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;BLOCKSIZE=128&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;INTERLEAVE=TILE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;BIGTIFF=YES&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;OVERVIEWS=NONE&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre></div><p>Arrays of arbitrary dimensions are reshaped into a 3D array (band, y, x) using the <code>md:pattern</code> field. With the <code>INTERLEAVE=TILE</code> option (check our post about <a href="https://https://tacofoundation.github.io/mrio/en/specification/cog.html#file-requirements" target="_blank" rel="noreferrer">COGs</a>), data is compressed into <code>1 × BLOCKSIZE × BLOCKSIZE</code> tiles and arranged contiguously along the band dimension.</p><p>In a 4-D array, the <code>md:pattern</code> can be defined in two ways.</p><ul><li><p>In the case <code>time band y x -&gt; (time band) y x</code>, data is stored continuously by band within each time step, such as: <code>b1time1, b2time1, ..., b1time2, b2time2, ..., b1time3, b2time3, ....</code></p></li><li><p>In the case <code>time band y x -&gt; (band time) y x</code>, data is stored continuously by time within each band, such as: <code>b1time1, b1time2, ..., b2time1, b2time2, ..., b3time1, b3time2, ....</code></p></li></ul><p>Data providers with large time dimensions (e.g., daily satellite imagery spanning decades) might prefer the band-time interleave layout. This approach ensures temporal byte continuity within the file, enabling efficient retrieval of time-series data. Specifically, requests for any length of time-series data can be fulfilled with just <strong>a single HTTP range request</strong>.</p><figure><img src="/mrio/assets/mode.BUXJ3ZN4.svg" alt="GeoTIFF file structure" style="width:100%;"><figcaption style="text-align:center;"><b>Figure 2:</b>Visual comparison of the effects of different `md:pattern` strategies.</figcaption></figure><p>By default, <code>mrio</code> assigns band descriptions (also known as band names) following the GDAL GeoTIFF convention. These descriptions are stored in the <code>TIFFTAG_GDAL_METADATA</code> XML tag. The band descriptions set names based on the <code>md:coordinates</code> key-value pairs. For example, given a Sentinel-2 5D array with the <code>md:pattern</code> of <code>product time band y x -&gt; (band product time) y x</code>, the resulting band descriptions will be:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>band[0]__product[0]__time[0] # B01__boa__20210101</span></span>
<span class="line"><span>band[0]__product[0]__time[1] # B01__boa__20210106</span></span>
<span class="line"><span>band[0]__product[0]__time[2] # B01__boa__20210111</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>band[0]__product[1]__time[0] # B01__toa__20210101</span></span>
<span class="line"><span>band[0]__product[1]__time[1] # B01__toa__20210106</span></span>
<span class="line"><span>band[0]__product[1]__time[2] # B01__toa__20210111</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>band[1]__product[0]__time[0] # B02__boa__20210101</span></span>
<span class="line"><span>band[1]__product[0]__time[1] # B02__boa__20210106</span></span>
<span class="line"><span>band[1]__product[0]__time[2] # B02__boa__20210111</span></span>
<span class="line"><span>...</span></span>
<span class="line"><span>band[1]__product[1]__time[0] # B02__toa__20210101</span></span>
<span class="line"><span>band[1]__product[1]__time[1] # B02__toa__20210106</span></span>
<span class="line"><span>band[1]__product[1]__time[2] # B02__toa__20210111</span></span></code></pre></div><p>Here, <code>band[x]</code>, <code>product[y]</code>, and <code>time[z]</code> correspond to the names specified in the <code>md:coordinates</code> dictionary. The <code>__</code> separator is used to distinguish between dimensions. When dragging and dropping mCOG files into GIS software, the band descriptions will be displayed as the band names.</p><figure><img src="/mrio/assets/qgis.CjZZZKPn.png" alt="GeoTIFF file structure" style="width:100%;"><figcaption style="text-align:center;"><b>Figure 3: </b>Example of a mCOG displayed in QGIS</figcaption></figure><h3 id="reading-data" tabindex="-1">Reading Data <a class="header-anchor" href="#reading-data" aria-label="Permalink to &quot;Reading Data&quot;">​</a></h3><p>When reading a mGeoTIFF file, the <code>mrio</code> API reconstructs the original multidimensional array and metadata by reversing the transformations applied during the writing process.</p><figure style="display:flex;flex-direction:column;align-items:center;"><img src="/mrio/assets/read_mode.CmDu49cQ.gif" style="width:70%;"><figcaption style="text-align:center;"><b>Figure 4: </b>Reading a GDAL GeoTIFF into an nD Array Using mrio.</figcaption></figure><p>The reconstruction involves the following steps:</p><ol><li><p><strong>Opening the File</strong>: The file is opened using the GDAL utility, and the <code>TIFFTAG_GDAL_METADATA</code> tag is accessed to retrieve the <code>MD_METADATA</code> JSON string.</p></li><li><p><strong>Parsing Metadata</strong>: The <code>MD_METADATA</code> string is parsed into a Python dictionary. Key fields, such as <code>md:pattern</code> and <code>md:coordinates</code>, are used to determine how the array should be reshaped to restore its original dimensions. Partial reads are supported, by <a href="https://github.com/tacofoundation/mrio-python/blob/708ce05b5cebbf38c2114399ed54c5b4b5769443/mrio/chunk_reader.py#L69" target="_blank" rel="noreferrer">vectorized operations</a>.</p></li><li><p><strong>Creating the Output</strong>: When the <code>engine</code> parameter is set to <code>xarray</code> (the default), the <code>md:attributes</code> field is also extracted. This enables the API to construct an <code>xarray.DataArray</code> object with the associated attributes and coordinates. Numpy is supported too.</p></li></ol><h2 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-label="Permalink to &quot;FAQ&quot;">​</a></h2><details class="details custom-block" close=""><summary>Is it supported by QGIS?</summary><p>If you open a mGeoTIFF file in QGIS, QGIS will display a <code>special</code> band names that are generated by <code>mrio</code>.</p></details><details class="details custom-block" close=""><summary>Is it supported by GDAL?</summary><p>Not natively. However, as mCOG is a COG file, it can be read by GDAL. That is actually what Python API does. It uses GDAL to read the file and then it virtually reshapes the data to the original shape.</p></details><details class="details custom-block" close=""><summary>Which programming languages are supported?</summary><p>The <code>mrio</code> API is currently available in Python. However, we have plans to support R and Julia in the future.</p></details><details class="details custom-block" close=""><summary>Can I use it with TensorFlow or PyTorch?</summary><p>Yes, you can! In fact, we developed <code>mrio</code> specifically for use in our internal deep-learning pipes at <a href="https://isp.uv.es/" target="_blank" rel="noreferrer">ISP - Image and Signal Processing group</a>.</p></details><h2 id="why-not-use-netcdf-hdf5-or-zarr" tabindex="-1">Why not use NetCDF, HDF5, or Zarr? <a class="header-anchor" href="#why-not-use-netcdf-hdf5-or-zarr" aria-label="Permalink to &quot;Why not use NetCDF, HDF5, or Zarr?&quot;">​</a></h2><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>A Personal Perspective:</strong> This reflects our views, Cesar Aybar and Julio Contreras. Many colleagues (including close friends!) actively advocate for <a href="https://www.youtube.com/watch?v=m345_TUjIdI" target="_blank" rel="noreferrer">NetCDF</a>. We all think Zarr is great, but it is not ready yet!</p></div><p><em>“Explicit is better than implicit.”</em> (<a href="https://peps.python.org/pep-0020/" target="_blank" rel="noreferrer">The Zen of Python</a>)</p><p>While there are many existing byte containers for multidimensional arrays, such as NetCDF, HDF5, and Zarr, our decision to use GeoTIFF stems from a combination of practical and community-based considerations:</p><ol><li><p><strong>Leverage Existing Tools and Expertise</strong>: There are many byte container formats available online. In theory, one could design a multidimensional array format using TIFF by saving each n-dimensional chunk in a separate IFD. With some effort, this approach could potentially achieve efficiency comparable to other n-dimensional array formats. However, by choosing the COG layout <strong>all the necessary tools already exist</strong>. GDAL is highly optimized for working with COG files and is supported by a large, active community of experts continuously improving and maintaining it. Back to the example of an illusional n-D chunked TIFF format, it would not only require significant effort to develop but also writing a lot of code to ensure compatibility with other software (i.e. QGIS). In practice, the success of a format often depends more on the people supporting it than if a format is theoretically better than another.</p></li><li><p><strong>Stability and Maturity</strong>: GeoTIFF, in particular, has benefited from decades of development and refinement, making it a mature and highly stable format. This stability and maturity are key factors in its widespread adoption and reliability. One could argue that HDF5 is also &quot;stable&quot;. However, the key difference lies in its scope, HDF5 is an extremely ambitious project compared to GeoTIFF or Zarr. Maintaining its large number of features and extensions is a complex task. Check the <a href="https://support.hdfgroup.org/documentation/hdf5/latest/_f_m_t3.html" target="_blank" rel="noreferrer">HDF5 specification</a> to give you an idea of the complexity. Breaking changes between minor versions is very common, which can disrupt compatibility for software built on top of it, such as NetCDF. This complexity makes HDF5 less interoperable, specifically for less experienced users.</p></li><li><p><strong>Zarr&#39;s Promising Yet Nascent Approach</strong>:</p></li></ol><p>Zarr is another general-purpose format, it is relatively new and highly flexible, with a clear specification with fewer than 10 pages. In Zarr, almost everything except for the datatype, compression, shape, and chunk size is implicit. Instead of being a fully self-contained file format, Zarr operates more as a convention for organizing n-dimensional arrays in a folder structure. Zarr is cool but it can be very challenging to implement in an efficiency manner. Consider the case of a single Sentinel-2 scene 13x10980x10980 pixels (<code>CHUNKSIZE=128;INTERLEAVE=TILE</code>), all the data with overviews included can be just one COG file. In Zarr, considering the same chunk size, it will be 24037 different files (we are not considering the overviews!). This is extremely inefficient and very costly in cloud storage. In a HTTP/2 context, GET operations that will cost 1 HTTP request in a COG, will cost hundreds/thousands in Zarr. However, with the introduction of sharding (<a href="https://zarr.dev/zeps/accepted/ZEP0002.html" target="_blank" rel="noreferrer">ZEP 2</a>), which enables chunk parsing, Zarr can partially solve this problem. Actually the Python <a href="https://github.com/zarr-developers/zarr-python" target="_blank" rel="noreferrer">Zarr API</a><br> and the other non-official Python <a href="https://github.com/ilan-gold/zarrs-python" target="_blank" rel="noreferrer">Zarr API</a> already support this feature. There are some geospatial initiatives like <a href="https://github.com/zarr-developers/geozarr-spec" target="_blank" rel="noreferrer">GeoZarr</a> but, they are very incipient.</p><p>As you can see, there is no perfect format for n-dimensional data. With mGeoTIFF, we aim to provide a simple, stable, and explicit format for n-dimensional arrays. By building on top of the COG layout. However, there are some drawbacks to this approach that data providers should be aware of:</p><ol><li><p><strong>Hard to apply streaming operations</strong>, especially when user-defined overviews are involved. While not technically impossible, implementing streaming in mCOG is more complex compared to Zarr&#39;s chunked design, where this process is quite more straightforward.</p></li><li><p><strong>Limited support for complex nested data structures</strong>. It is not supported to store complex nested data structures in mCOG, like a list of n-dimensional arrays.</p></li><li><p><strong>Imposible to extend the chunking schema</strong>. In mGeoTIFF, the chunking schema is dimension fixed. This means that if you have a 4D array, you can only define the chunking schema as (1 x 1 x BLOCKXSIZE x BLOCKYSIZE) or (1 x C x BLOCKXSIZE x BLOCKYSIZE) if pixel interleave is used. Chunking schema is a natural feature in Zarr or NetCDF5. This limitation is critical because it will make it larger in size with respect to Zarr or NetCDF5, especially when there is a lot of redundancy in the data (e.g. climate data).</p></li></ol><p>Despite these limitations, we believe that multidimensional GeoTIFF is currently the best option for many use cases. Whether you are creating a web map to visualize 10 years of changes in your village or building a deep learning dataset with multitemporal samples, mCOG provides a robust, mature, and reliable solution.</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/tacofoundation/mrio/edit/main/docs/en/specification/multidimensional-geotiff-specification.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> Edit this page on GitHub<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/mrio/en/specification/cog.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>COG</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/mrio/en/specification/temporal-geotiff-specification.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>Temporal COG</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>© 2025 mrio | open source for a better tomorrow</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"en_python_attributes.md\":\"DbNCl0tg\",\"en_python_changelog.md\":\"DN8_pl16\",\"en_python_contributing.md\":\"DnHla-5r\",\"en_python_earth-engine-api.md\":\"BLq4Eirm\",\"en_python_examples.md\":\"IfDfUhtM\",\"en_python_mrio.md\":\"BPKkHEfb\",\"en_python_rasterio_api.md\":\"D485ghk7\",\"en_python_temporal_utils.md\":\"BZIFl4IZ\",\"en_python_validation.md\":\"lnrjiQV4\",\"en_specification_best-practices.md\":\"Buc2Y1V9\",\"en_specification_cog.md\":\"CRR8zoVB\",\"en_specification_gdal-geotiff.md\":\"cOxe0sPK\",\"en_specification_geotiff.md\":\"DKGeRvi_\",\"en_specification_multidimensional-geotiff-specification.md\":\"Bn0hUfyW\",\"en_specification_multidimensional-geotiff.md\":\"BqgHXgQ4\",\"en_specification_other-functions.md\":\"PSCbyHxr\",\"en_specification_specification.md\":\"woFo65q1\",\"en_specification_temporal-geotiff-specification.md\":\"CP95mrui\",\"en_specification_temporal-geotiff.md\":\"BuR0owZM\",\"index.md\":\"CBlSh_Az\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"mrio\",\"description\":\"Vite & Vue powered static site generator.\",\"base\":\"/mrio/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"Specification\",\"link\":\"/en/specification/geotiff/\",\"activeMatch\":\"/en/specification/\"},{\"text\":\"Python\",\"link\":\"/en/python/mrio/\",\"activeMatch\":\"/en/python/\"},{\"text\":\"R\",\"link\":\"#\"},{\"text\":\"Julia\",\"link\":\"#\"}],\"search\":{\"provider\":\"local\"},\"sidebar\":{\"/en/specification/\":{\"base\":\"/en/specification/\",\"items\":[{\"text\":\"Introduction\",\"collapsed\":false,\"items\":[{\"text\":\"GeoTIFF\",\"link\":\"geotiff\"},{\"text\":\"GDALGeoTIFF\",\"link\":\"gdal-geotiff\"},{\"text\":\"COG\",\"link\":\"cog\"}]},{\"text\":\"Specification\",\"collapsed\":false,\"items\":[{\"text\":\"Multidimensional COG\",\"link\":\"multidimensional-geotiff-specification\"},{\"text\":\"Temporal COG\",\"link\":\"temporal-geotiff-specification\"}]}]},\"/en/python/\":{\"base\":\"/en/python/\",\"items\":[{\"text\":\"API Reference\",\"items\":[{\"text\":\"mrio\",\"link\":\"mrio\"},{\"text\":\"Validation\",\"link\":\"validation\"},{\"text\":\"Rasterio API\",\"link\":\"rasterio_api\"},{\"text\":\"Earth Engine API\",\"link\":\"earth-engine-api\"},{\"text\":\"Temporal API\",\"link\":\"temporal_utils\"},{\"text\":\"Attributes\",\"link\":\"attributes\"},{\"text\":\"Examples\",\"link\":\"examples\"}]},{\"items\":[{\"text\":\"Changelog\",\"link\":\"CHANGELOG.md\"},{\"text\":\"Contributing\",\"link\":\"CONTRIBUTING.md\"}]}]}},\"editLink\":{\"pattern\":\"https://github.com/tacofoundation/mrio/edit/main/docs/:path\",\"text\":\"Edit this page on GitHub\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/tacofoundation/mrio\"},{\"icon\":\"twitter\",\"link\":\"https://x.com/isp_uv_es\"},{\"icon\":{\"svg\":\"\\n          <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path fill=\\\"currentColor\\\" d=\\\"M4 20q-.825 0-1.412-.587T2 18V6q0-.825.588-1.412T4 4h16q.825 0 1.413.588T22 6v12q0 .825-.587 1.413T20 20zm8-7l8-5V6l-8 5l-8-5v2z\\\"/></svg>\"},\"link\":\"mailto:csaybar@gamil.com\"}],\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"© 2025 mrio | open source for a better tomorrow\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>